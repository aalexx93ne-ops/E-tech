# E-Tech Store

Django-–º–∞–≥–∞–∑–∏–Ω —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏ —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º, –∫–æ—Ä–∑–∏–Ω–æ–π, –∑–∞–∫–∞–∑–∞–º–∏ –∏ –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º.

## –°—Ç–µ–∫

- Python 3.10+
- Django 4.2
- django-allauth (email + Google OAuth)
- django-jazzmin (admin UI)
- HTMX (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π UI –±–µ–∑ JS-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤)
- SQLite (–¥–µ–≤) / PostgreSQL (–ø—Ä–æ–¥)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/aalexx93ne-ops/E-tech.git
cd E-tech
```

### 2. –°–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
python -m venv .venv

# Windows
.venv\Scripts\activate

# Linux / macOS
source .venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç–∫—Ä—ã—Ç—å `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `SECRET_KEY` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) |
| `DEBUG` | `True` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, `False` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ |
| `ALLOWED_HOSTS` | –ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: `localhost,127.0.0.1` |
| `GOOGLE_CLIENT_ID` | ID –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `GOOGLE_CLIENT_SECRET` | –°–µ–∫—Ä–µ—Ç Google OAuth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |
| `EMAIL_BACKEND` | –ë—ç–∫–µ–Ω–¥ –¥–ª—è email (–¥–µ—Ñ–æ–ª—Ç: console) |
| `PAYMENT_CALLBACK_SECRET` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ callback |
| `CRYPTOCLOUD_API_KEY` | API –∫–ª—é—á CryptoCloud (–¥–ª—è –ø—Ä–∏—ë–º–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã) |
| `CRYPTOCLOUD_SECRET_KEY` | Secret –∫–ª—é—á CryptoCloud (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏) |
| `CRYPTOCLOUD_SHOP_ID` | ID –º–∞–≥–∞–∑–∏–Ω–∞ –≤ CryptoCloud |

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `SECRET_KEY`:

```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

### 5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
python manage.py migrate
```

### 6. –°–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
python manage.py createsuperuser
```

### 7. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
python manage.py runserver
```

–ú–∞–≥–∞–∑–∏–Ω: http://127.0.0.1:8000
–ê–¥–º–∏–Ω–∫–∞: http://127.0.0.1:8000/admin

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

```
index/    ‚Äî –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—ã, —Ç–µ–≥–∏, —Ñ–∏–ª—å—Ç—Ä—ã
cart/     ‚Äî –∫–æ—Ä–∑–∏–Ω–∞ (—Å–µ—Å—Å–∏–æ–Ω–Ω–∞—è –¥–ª—è –≥–æ—Å—Ç–µ–π, –ë–î –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
orders/   ‚Äî –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
users/    ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
appx/     ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (settings.py, urls.py)
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
python manage.py test cart orders
```

## –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```bash
python generate_products.py
```

## –ü—Ä–æ–¥–∞–∫—à–µ–Ω

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º —É–±–µ–¥–∏—Ç—å—Å—è:

- `DEBUG=False` –≤ `.env`
- `ALLOWED_HOSTS` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞
- `SECRET_KEY` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á
- `EMAIL_BACKEND` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ SMTP
- –ù–∞—Å—Ç—Ä–æ–µ–Ω –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (nginx + gunicorn)
- –í—ã–ø–æ–ª–Ω–µ–Ω–æ `python manage.py collectstatic`

---

## üí≥ –ü—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π (–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞)

### NowPayments (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

NowPayments ‚Äî –ø–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 100+ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç. **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.

#### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://nowpayments.io/
2. –ù–∞–∂–º–∏—Ç–µ **"Sign Up"**
3. –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API Keys**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **API Key**

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```bash
NOWPAYMENTS_API_KEY=–≤–∞—à-api-key-–∏–∑-–ª–∏—á–Ω–æ–≥–æ-–∫–∞–±–∏–Ω–µ—Ç–∞
```

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IPN (Instant Payment Notification)

–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ NowPayments —É–∫–∞–∂–∏—Ç–µ:

- **IPN Secret**: –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `PAYMENT_CALLBACK_SECRET`)
- **IPN URL**: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/orders/payment/callback/`

–î–ª—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞ localhost –º–æ–∂–Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å.

#### 5. –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã

NowPayments –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 100+ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç:
- Bitcoin (BTC)
- Ethereum (ETH)
- USDT (TRC20, ERC20, BEP20)
- TRON (TRX)
- Litecoin (LTC)
- Dogecoin (DOGE)
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ

#### 6. –ö–æ–º–∏—Å—Å–∏–∏

- NowPayments: 0.5-1% (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã)
- –°–µ—Ç—å (gas): –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –±–ª–æ–∫—á–µ–π–Ω–∞

---

### CryptoCloud (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)

–ï—Å–ª–∏ –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º NowPayments –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CryptoCloud.

#### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://cryptocloud.pro/
2. –ù–∞–∂–º–∏—Ç–µ **"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ API-–∫–ª—é—á–µ–π

1. –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **API**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - `API Key`
   - `Secret Key`
   - `Shop ID`

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:

```bash
CRYPTOCLOUD_API_KEY=–≤–∞—à-api-key
CRYPTOCLOUD_SECRET_KEY=–≤–∞—à-secret-key
CRYPTOCLOUD_SHOP_ID=–≤–∞—à-shop-id
```

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ callback URL

–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ CryptoCloud —É–∫–∞–∂–∏—Ç–µ:

- **Status URL**: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/orders/payment/callback/`
- **Success URL**: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/orders/success/<order_id>/`
- **Fail URL**: `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru/orders/create/`

---
