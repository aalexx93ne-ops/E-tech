{% load static %}
<form method="get" class="sidebar">
  <h3 class="sidebar-title" id="brands-title">Бренды</h3>
  <ul class="sidebar-list collapsible" id="brands-list" aria-labelledby="brands-title">
    {% for brand in brands %}
    <li class="{% if forloop.counter > 5 %}hidden-item{% endif %}">
      <label>
        <input type="checkbox" name="brand" value="{{ brand.slug }}"
               {% if brand.slug in selected_brands %}checked{% endif %}>
        {{ brand.name }}
      </label>
    </li>
    {% empty %}
    <li>Бренды не найдены.</li>
    {% endfor %}
  </ul>
  {% if brands|length > 5 %}
  <button type="button" class="show-more-btn" onclick="toggleList('brands-list', this)">Показать все ({{ brands|length }})</button>
  {% endif %}

  <h3 class="sidebar-title" id="categories-title">Категории</h3>
  <ul class="sidebar-list collapsible" id="categories-list" aria-labelledby="categories-title">
    {% for category in categories %}
    <li class="{% if forloop.counter > 5 %}hidden-item{% endif %}">
      <label>
        <input type="checkbox" name="category" value="{{ category.slug }}"
               {% if category.slug in selected_categories %}checked{% endif %}>
        {{ category.name }}
      </label>
    </li>
    {% empty %}
    <li>Категории не найдены.</li>
    {% endfor %}
  </ul>
  {% if categories|length > 5 %}
  <button type="button" class="show-more-btn" onclick="toggleList('categories-list', this)">Показать все ({{ categories|length }})</button>
  {% endif %}

  <h3 class="sidebar-title" id="tags-title">Теги</h3>
  <ul class="sidebar-list collapsible" id="tags-list" aria-labelledby="tags-title">
    {% for tag in tags %}
    <li class="{% if forloop.counter > 5 %}hidden-item{% endif %}">
      <label>
        <input type="checkbox" name="tag" value="{{ tag.slug }}"
               {% if tag.slug in selected_tags %}checked{% endif %}>
        {{ tag.name }}
      </label>
    </li>
    {% empty %}
    <li>Теги не найдены.</li>
    {% endfor %}
  </ul>
  {% if tags|length > 5 %}
  <button type="button" class="show-more-btn" onclick="toggleList('tags-list', this)">Показать все ({{ tags|length }})</button>
  {% endif %}

  <h3 class="sidebar-title">Скидка</h3>
  <ul class="sidebar-list">
    <li>
      <label>
        <input type="checkbox" name="discount" value="1"
               {% if discount_only %}checked{% endif %}>
        Только со скидкой
      </label>
    </li>
  </ul>

  <button class="action-btn primary" type="submit">Применить</button>
</form>

<script src="{% static 'js/sidebar.js' %}"></script>
